var canvas=document.getElementsByTagName('canvas')[0];var ctx=canvas.getContext("2d");var tile=32;var COLS=canvas.width/tile,ROWS=canvas.height/tile;var dir=0;var board=[[1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,1,1,1,0,0,1,1,1,1,1,1,6,0,0,1,0,1,1],[0,1,1,1,1,0,1,0,0,0,0,0,0,1,3,1,1,1,0,1,1,0,1,5,1,0,0,1,1,1,1,1,1,0,0,0,1,0,1,1],[1,1,1,0,1,1,1,0,0,0,0,0,0,1,0,0,0,0,0,1,1,1,1,0,1,0,0,1,1,1,1,1,1,0,0,0,0,1,1,1],[1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,0,1,0,0,1,1,1,1,1,1,0,0,0,0,0,1,1],[1,1,1,0,1,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,2,0,1,0,0,0,1,1,1,0,0,0,0,1,1,1,1,1],[1,1,0,1,0,0,1,0,0,0,0,0,0,1,1,0,0,0,0,1,1,1,1,1,1,0,0,0,1,1,0,0,0,0,0,1,1,1,1,1],[1,0,0,0,0,0,0,0,0,0,0,8,0,1,1,0,0,1,1,1,1,0,1,0,0,0,0,0,1,1,0,1,0,0,1,1,1,1,1,1],[1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,1,1,0,1,0,0,1,1,1,1,1,1],[1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,1,1,0,0,1,1,1,1,1,1],[1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,1,1,1,1,1],[1,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,1,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1],[1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,0,0,0,0,0,8,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,0,1,0,0,10,0,0,0,1],[1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,0,0,0,1,0,0,1,1,0,0,1,1,1,1,1,0,0,0,0,1,1],[1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,9,9,1,1,0,0,0,0,0,0,1,1,1],[1,0,1,0,0,0,0,0,0,0,1,0,0,0,1,1,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1],[1,0,0,0,0,0,0,0,0,0,0,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,1,0,0,0,0,0,1,1,1],[0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]];var currentX,currentY;var degree=0;var started=false;var firstEnter=false;var entered=0;var drawBook=false;var mouseUse=false;var display=false;function clearOldFrame(){ctx.clearRect(currentX,currentY,actorWidth,actorHeight);} function init(){createChar();} function createChar(){currentX=9*tile;currentY=10*tile;} function keyPress(key){var temp;switch(key){case'enter':if(firstEnter){entered=2;display=false;} else firstEnter=true;break;case'up':dir=1;break;case'right':dir=2;break;case'down':dir=3;break;case'left':dir=4;break;}} function keyRelease(key){dir=0;} function educated(val){var nmbody=document.getElementsByClassName("noticeModal-body")[0];var canMove=false;if(val===1){switch(degree){case 0:display=true;noticeModal.style.display="block";nmbody.innerHTML="<h2 class='intro'>Notice</h2><p class='big'>One does not simply walk in and get a degree.</p><p class='big'>Go back to the room and study some books.</p><p class='small'>Press 'Enter' to dismiss.</p>";drawBook=true;break;case 1:board[10][17]=5;canMove=true;break;case 2:display=true;entered=1;noticeModal.style.display="block";nmbody.innerHTML="<h2 class='intro'>Notice</h2><p class='big'>One more thing: The signs outside will contain the information after you unlocked what inside the rooms.</p><p class='small'>press 'Enter' to dismiss.</p>";canMove=true;degree=3;break;case 3:canMove=true;break;}}else if(val===0&&degree===0){display=true;noticeModal.style.display="block";nmbody.innerHTML="<h2 class='intro'>Notice</h2><p class='big'>Read all the books!</p><p class='big'>Time to get the degree!</p><p class='small'>Press 'Enter' to dismiss.</p>";degree=1;canMove=true;}else{canMove=true;} return canMove;} function checkCollision(offsetX,offsetY){if(offsetX===0){var newLocY=offsetY>0?Math.floor((currentY)/tile)+1:Math.floor((currentY+offsetY)/tile);if(newLocY<0||newLocY>=ROWS){return 0;} if(board[newLocY][Math.floor(currentX/tile)]===1||board[newLocY][Math.ceil(currentX/tile)]===1){return 0;} if(board[newLocY][Math.floor(currentX/tile)]===3){educated(0);} if(board[newLocY][Math.floor(currentX/tile)]===5){eduModal.style.display="block";degree=2;} if(board[newLocY][Math.floor(currentX/tile)]===6){skillModal.style.display="block";board[10][31]=6;} if(board[newLocY][Math.floor(currentX/tile)]===7){projModal.style.display="block";board[13][25]=7;} if(board[newLocY][Math.floor(currentX/tile)]===8){contactModal.style.display="block";} if(board[newLocY][Math.floor(currentX/tile)]===9){if(!mouseUse){entered=1;var nmbodyx=document.getElementsByClassName("noticeModal-body")[0];display=true;noticeModal.style.display="block";nmbodyx.innerHTML="<h2>Notice</h2><p class='big'>You need to use the mouse while checking projects.</p><p class='small'>press 'Enter' to dismiss.</p>";mouseUse=true;}} if(board[newLocY][Math.floor(currentX/tile)]===10){expModal.style.display="block";} return offsetY;} var newLocX=offsetX>=0?Math.floor(currentX/tile)+1:Math.floor((currentX+offsetX)/tile);if(newLocX<0||newLocX>=COLS){return 0;} if(board[Math.floor(currentY/tile)][newLocX]===1||board[Math.ceil(currentY/tile)][newLocX]===1){return 0;} if(board[Math.floor(currentY/tile)][newLocX]===2){if(!educated(1))return 0;} if(board[Math.floor(currentY/tile)][newLocX]===5){eduModal.style.display="block";degree=2;} if(board[Math.floor(currentY/tile)][newLocX]===6){skillModal.style.display="block";board[10][31]=6;} if(board[Math.floor(currentY/tile)][newLocX]===7){projModal.style.display="block";board[13][25]=7;} if(board[Math.floor(currentY/tile)][newLocX]===8){contactModal.style.display="block";} if(board[Math.floor(currentY/tile)][newLocX]===10){expModal.style.display="block";} return offsetX;} function checkModal(){if((entered===2&&!display)||(started&&((board[Math.floor(currentY/tile)+1][Math.floor(currentX/tile)]!==9&&entered!==1)&&(board[Math.floor(currentY/tile)][Math.floor(currentX/tile)+1]!==2&&entered!==1)&&board[Math.floor(currentY/tile)][Math.floor(currentX/tile)]!==3))){noticeModal.style.display="none";} if(board[Math.floor(currentY/tile)][Math.floor(currentX/tile)]!==5){eduModal.style.display="none";} if(board[Math.floor(currentY/tile)][Math.floor(currentX/tile)]!==6){skillModal.style.display="none";} if(board[Math.floor(currentY/tile)][Math.floor(currentX/tile)]!==7){projModal.style.display="none";} if(board[Math.floor(currentY/tile)][Math.floor(currentX/tile)]!==8){contactModal.style.display="none";} if(board[Math.floor(currentY/tile)][Math.floor(currentX/tile)]!==10){expModal.style.display="none";}} init();